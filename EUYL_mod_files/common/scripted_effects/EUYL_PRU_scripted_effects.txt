PRU_initiate_balance_of_power = {
    set_power_balance = {
        id = PRU_army_navy_bop
        left_side = PRU_navy_side # will keep the last set side if not specified
        right_side = PRU_army_side # will keep the last set side if not specified
        set_value = 0.05 # if specified will set the value of the power balance, this option will override the effect of set_default so the two options should not be used together. if neither set_default or set_value is specified the current value of the power balance will not change
    }
}

PRU_increase_army_10_percent = {
    add_power_balance_value = {
        id = PRU_army_navy_bop
        value = 0.1
    }
}

PRU_increase_army_15_percent = {
    add_power_balance_value = {
        id = PRU_army_navy_bop
        value = 0.15
    }
}

PRU_increase_army_25_percent = {
    add_power_balance_value = {
        id = PRU_army_navy_bop
        value = 0.25
    }
}

PRU_increase_navy_10_percent = {
    add_power_balance_value = {
        id = PRU_army_navy_bop
        value = -0.1
    }
}

PRU_increase_navy_15_percent = {
    add_power_balance_value = {
        id = PRU_army_navy_bop
        value = -0.15
    }
}

PRU_increase_navy_25_percent = {
    add_power_balance_value = {
        id = PRU_army_navy_bop
        value = -0.25
    }
}

PRU_nullify_navy = {
    add_power_balance_value = {
        id = PRU_army_navy_bop
        value = 1
    }
}

PRU_nullify_army = {
    add_power_balance_value = {
        id = PRU_army_navy_bop
        value = -1
    }
}

PRU_bop_remove_bop_effect = {
	remove_power_balance = { id = PRU_army_navy_bop }
}

PRU_add_5_revolution_support = {
    custom_effect_tooltip = PRU_add_5_revolution_tt
    add_to_variable = { PRU_support_for_the_revolution = 5 }
    clamp_variable = {
        var = PRU_support_for_the_revolution
        min = 0
        max = 100
    }
}

PRU_add_10_revolution_support = {
    custom_effect_tooltip = PRU_add_10_revolution_tt
    add_to_variable = { PRU_support_for_the_revolution = 10 }
    clamp_variable = {
        var = PRU_support_for_the_revolution
        min = 0
        max = 100
    }
}

PRU_add_15_revolution_support = {
    custom_effect_tooltip = PRU_add_15_revolution_tt
    add_to_variable = { PRU_support_for_the_revolution = 15 }
    clamp_variable = {
        var = PRU_support_for_the_revolution
        min = 0
        max = 100
    }
}

PRU_add_20_revolution_support = {
    custom_effect_tooltip = PRU_add_20_revolution_tt
    add_to_variable = { PRU_support_for_the_revolution = 20 }
    clamp_variable = {
        var = PRU_support_for_the_revolution
        min = 0
        max = 100
    }
}

PRU_remove_5_revolution_support = {
    custom_effect_tooltip = PRU_remove_5_revolution_tt
    subtract_from_variable = { PRU_support_for_the_revolution = 5 }
    clamp_variable = {
        var = PRU_support_for_the_revolution
        min = 0
        max = 100
    }
}

PRU_start_communist_civil_war = {
    if = {
		limit = {
			NOT = {
				has_template = "Milicias"
			}
		}
		division_template = { 
			name = "Milicias" 
			division_names_group = SPAN_INF_02 
			template_counter = 3
			is_locked = yes 
			regiments = { 
				infantry = { x = 0 y = 0 }  
				infantry = { x = 0 y = 1 } 
				infantry = { x = 0 y = 2 } 
			}
		}
	}
    if = { ## Strongest civil war possibility
        limit = {
            check_variable = { PRU_support_for_the_revolution > 80 }
        }
        start_civil_war = {
			ruling_party = communism
			ideology = ROOT 
			size = 0.35
			keep_all_characters = yes 
            capital = 1000
            states = { 1000 494 491 1022 1005 }
			PREV = {
				PRU_Oscar_benavides = {
					set_nationality = PREV.PREV
				}
				PRU_ernesto_montagne_markholz = {
					set_nationality = PREV.PREV
				}
				PRU_eloy_ureta_montehermoso = {
					set_nationality = PREV.PREV 
				}
                PRU_manuel_a_odria = {
                    set_nationality = PREV.PREV 
                }
                if = {
					limit = {
						NOT = { has_global_flag = PRU_coerced_politicians_flag }
					}
					every_character = {
						limit = { 
							NOT = { 
                                has_character_flag = PRU_communist
                            }
						}
						random_list = {
							40 = {
								set_nationality = PREV.PREV
							}
							60 = { }
						}
					}
				}
				promote_character = PRU_Oscar_benavides
			}
		}
        every_controlled_state = {
            create_unit = {
				division = "name = \"División de Ejército\" division_template = \"División de Infanteria\" start_experience_factor = 0.02 start_equipment_factor = 0.9" 
				owner = ROOT
			}
        }
        random_other_country = {
            limit = {
                original_tag = PRU 
                has_civil_war = yes
            }
            load_focus_tree = {
                tree = peru_focus
                keep_completed = no 
            }
            unlock_national_focus = PRU_repairing_the_nation
            unlock_national_focus = PRU_the_1933_constitution...
            unlock_national_focus = PRU_the_best_of_both_worlds
            unlock_national_focus = PRU_strengthen_civil_liberties
            unlock_national_focus = PRU_the_will_of_the_people
            unlock_national_focus = PRU_the_state_serves_the_people
        }
    }
    else_if = { ## Middle difficulty
        limit = {
            check_variable = { ARG_temp_coalition_strength > 50 }
        }
        start_civil_war = {
			ruling_party = communism
			ideology = ROOT 
			size = 0.45
			keep_all_characters = yes 
            capital = 1000
            states = { 1000 494 491 1022 1005 988 }
			PREV = {
				PRU_Oscar_benavides = {
					set_nationality = PREV.PREV
				}
				PRU_ernesto_montagne_markholz = {
					set_nationality = PREV.PREV
				}
				PRU_eloy_ureta_montehermoso = {
					set_nationality = PREV.PREV 
				}
                PRU_manuel_a_odria = {
                    set_nationality = PREV.PREV 
                }
                if = {
					limit = {
						NOT = { has_global_flag = PRU_coerced_politicians_flag }
					}
					every_character = {
						limit = { 
							NOT = { 
                                has_character_flag = PRU_communist
                            }
						}
						random_list = {
							40 = {
								set_nationality = PREV.PREV
							}
							60 = { }
						}
					}
				}
				promote_character = PRU_Oscar_benavides
			}
		}
        random_owned_controlled_state = {
            create_unit = {
				division = "name = \"División de Ejército\" division_template = \"División de Infanteria\" start_experience_factor = 0.02 start_equipment_factor = 0.9" 
				owner = ROOT
                count = 3
			}
        }
        random_other_country = {
            limit = {
                original_tag = PRU 
                has_civil_war = yes 
            }
            load_focus_tree = {
                tree = peru_focus
                keep_completed = no 
            }
            unlock_national_focus = PRU_repairing_the_nation
            unlock_national_focus = PRU_the_1933_constitution...
            unlock_national_focus = PRU_the_best_of_both_worlds
            unlock_national_focus = PRU_strengthen_civil_liberties
            unlock_national_focus = PRU_the_will_of_the_people
            unlock_national_focus = PRU_the_state_serves_the_people
            random_owned_controlled_state = {
                create_unit = {
                    division = "name = \"División de Ejército\" division_template = \"División de Infanteria\" start_experience_factor = 0.02 start_equipment_factor = 0.9" 
                    owner = PREV
                    count = 2
                }
            }
        }
    }
    else = { ## Hardest Civil War 
        start_civil_war = {
			ruling_party = communism
			ideology = ROOT 
			size = 0.55
			keep_all_characters = yes 
            capital = 1000
            states = { 1000 494 491 1022 1005 988 303 }
			PREV = {
				PRU_Oscar_benavides = {
					set_nationality = PREV.PREV
				}
				PRU_ernesto_montagne_markholz = {
					set_nationality = PREV.PREV
				}
				PRU_eloy_ureta_montehermoso = {
					set_nationality = PREV.PREV 
				}
                PRU_manuel_a_odria = {
                    set_nationality = PREV.PREV 
                }
                if = {
					limit = {
						NOT = { has_global_flag = PRU_coerced_politicians_flag }
					}
					every_character = {
						limit = { 
							NOT = { 
                                has_character_flag = PRU_communist
                            }
						}
						random_list = {
							40 = {
								set_nationality = PREV.PREV
							}
							60 = { }
						}
					}
				}
				promote_character = PRU_Oscar_benavides
			}
		}
        random_other_country = {
            limit = {
                original_tag = PRU 
                has_civil_war = yes 
            }
            load_focus_tree = {
                tree = peru_focus
                keep_completed = no 
            }
            unlock_national_focus = PRU_repairing_the_nation
            unlock_national_focus = PRU_the_1933_constitution...
            unlock_national_focus = PRU_the_best_of_both_worlds
            unlock_national_focus = PRU_strengthen_civil_liberties
            unlock_national_focus = PRU_the_will_of_the_people
            unlock_national_focus = PRU_the_state_serves_the_people
            every_controlled_state = {
                create_unit = {
                    division = "name = \"División de Ejército\" division_template = \"División de Infanteria\" start_experience_factor = 0.02 start_equipment_factor = 0.9" 
                    owner = PREV
                }
            }
        }
    }
    every_controlled_state = {
        create_unit = {
			division = "name = \"Milicias\" division_template = \"Milicias\" start_experience_factor = 0.02 start_equipment_factor = 0.9" 
			owner = ROOT
            count = 2
		}
    }
    random_other_country = {
        limit = {
            original_tag = PRU 
            has_civil_war = yes 
        }
        add_ideas = PRU_civil_war_d_idea
        every_controlled_state = {
            create_unit = {
                division = "name = \"Milicias\" division_template = \"Milicias\" start_experience_factor = 0.02 start_equipment_factor = 0.9" 
                owner = PREV
                count = 2
            }
        }
    }
}

PRU_improve_social_and_economic_crisis = {
    if = {
        limit = { has_idea = PRU_social_and_economic_crisis_1 }
        swap_ideas = {
            remove_idea = PRU_social_and_economic_crisis_1
            add_idea = PRU_social_and_economic_crisis_2
        }
    }
    else_if = {
        limit = { has_idea = PRU_social_and_economic_crisis_2 }
        swap_ideas = {
            remove_idea = PRU_social_and_economic_crisis_2
            add_idea = PRU_social_and_economic_crisis_3
        }
    }
    else = { remove_ideas = PRU_social_and_economic_crisis_3 }
}